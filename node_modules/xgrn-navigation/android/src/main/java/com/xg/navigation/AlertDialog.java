package com.xg.navigation;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.graphics.Color;
import android.graphics.drawable.ColorDrawable;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.view.ViewGroup;

import com.facebook.react.ReactApplication;
import com.facebook.react.ReactInstanceManager;
import com.facebook.react.ReactRootView;

/**
 * Created by fanzhengchen on 3/14/18.
 */

public class AlertDialog extends Dialog {

    private Activity mActivity;
    private ReactRootView mReactRootView;
    private ReactInstanceManager mReactInstanceManager;

    public AlertDialog(@NonNull Context context) {
        super(context);

        mActivity = NavigationActivity.currentActivity;
        mReactRootView = new ReactRootView(mActivity);
        mReactInstanceManager = ((ReactApplication) mActivity.getApplication())
                .getReactNativeHost().getReactInstanceManager();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(mReactRootView);
        getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.MATCH_PARENT);
        getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));


    }

    public void startReactNativeApplication(Bundle bundle) {
        if (mReactRootView != null) {
            mReactRootView.startReactApplication(mReactInstanceManager,
                    "alert", bundle);
        }
    }


}
