//
//  LaunchPlaceHolder.m
//  XGNavigation
//
//  Created by nuomi on 2018/3/6.
//  Copyright © 2018年 demo. All rights reserved.
//

#import "LaunchPlaceHolder.h"
#import "XGNavigationMacro.h"

#define LaunchPlaceHolderImage  20180306

@implementation LaunchPlaceHolder

//启动页图片
+ (void)showLaunchImageOnWindow{
    xg_dispatch_main_async_safe(^{
        [self safeThreadShowLaunchImageOnWindow];
    });
}

+ (void)safeThreadShowLaunchImageOnWindow{
    // 先移除，防止重复添加
    [self removeLaunchImageFromWindow];
    UIImage * img = nil;
    NSString * imgPath = nil;
    if(IS_IPHONE_4_OR_LESS){
        imgPath = @"LaunchImage-700@2x.png";
    }else if(IS_IPHONE_5){
        imgPath = @"LaunchImage-700-568h@2x.png";
    }else if(IS_IPHONE_6){
        imgPath = @"LaunchImage-800-667h@2x.png";
    }else if(IS_IPHONE_6P){
        imgPath = @"LaunchImage-800-Portrait-736h@3x.png";
    }else if(IS_IPHONE_X){
        imgPath = @"LaunchImage-1100-Portrait-2436h@3x.png";
    }else{
        //todo 待添加ipad的展位图
        img = nil;
    }
    
    if (!imgPath) return;
    imgPath = [[NSBundle mainBundle] pathForResource:imgPath ofType:nil];
    if (!imgPath) return;
    img = [UIImage imageWithContentsOfFile:imgPath];
    if (!img) return;
    UIImageView * imgV = [[UIImageView alloc] initWithImage:img];
    imgV.frame = CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height);
    imgV.tag = LaunchPlaceHolderImage;
    [[UIApplication sharedApplication].keyWindow addSubview:imgV];
}

+ (void)removeLaunchImageFromWindow{
    xg_dispatch_main_async_safe(^{
        UIView * imgV = [[UIApplication sharedApplication].keyWindow viewWithTag:LaunchPlaceHolderImage];
        if (imgV){
            [imgV removeFromSuperview];
        }
    });
}

@end

